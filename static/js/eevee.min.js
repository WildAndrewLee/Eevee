function FieldTemplate(a){a=a||{},this.label=a.label,this.value=a.value||a.selected,this.placeholder=a.placeholder,this._validators=[],this.disabled=a.disabled||!1,this.field=null}function TextField(a){FieldTemplate.call(this,a),this.field=$("<input>")}function SelectField(a){FieldTemplate.call(this,a),this.field=$("<select>"),this.options=a.options||[]}function NumberField(a){FieldTemplate.call(this,a),this.field=$("<input>"),this.min=a.min||0,this.max=a.max||1,this.placeholder=a.placeholder||this.min,this.addValidator(function(a){return this.min<=a&&a<=this.max}),this.change(function(a){a>this.max?$(this.field).val(this.max):a<this.min&&$(this.field).val(this.min)})}function CheckField(a){FieldTemplate.call(this,a),this.field=$("<input>"),this.checked=a.checked||!1}function Field(a){a||(a={});var b={type:"text"};return Object.getOwnPropertyNames(b).forEach(function(c){a.hasOwnProperty(c)||(a[c]=b[c])}),"text"==a.type?new TextField(a):"select"==a.type?new SelectField(a):"number"==a.type?new NumberField(a):"check"==a.type?new CheckField(a):null}function get_forms(a){for(var b=0;b<FORMS.length;b++){var c=FORMS[b];if(c[0]===a){var d=[];return Object.getOwnPropertyNames(c[1]).forEach(function(a){d.push([c[1][a],a])}),d}}return null}function get_abilities(a){var b=ABILITY_MAP[a],c=[];return b.forEach(function(a,b){c.push([a[0],ABILITIES[a[0]-1]])}),c}function get_ability_slot(a,b){for(var c=ABILITY_MAP[a],d=0;d<c.length;d++)if(c[d][0]===b)return c[d][1];return null}function get_max_exp(a){var b=EXP_MAP[GROWTH_MAP[a]-1];return b[b.length-1]}function get_exp_for_level(a,b){var c=EXP_MAP[GROWTH_MAP[a]-1];return c[b-1]}function get_level_from_exp(a,b){for(var c=EXP_MAP[GROWTH_MAP[a]-1],d=0;d<c.length;d++)if(c[d]>b)return d;return 100}function is_genderless(a){return-1===GENDER_MAP[a]}function is_only_female(a){return 8===GENDER_MAP[a]}function get_natures_as_options(){var a=[];return NATURES.forEach(function(b,c){a.push([c,b])}),a}function Pokemon(a){this.id=a,a--,this.name=POKEMON[a],this.nickname=null,this.valid_moves=MOVE_MAP[a],this.valid_abilities=get_abilities(a),this.valid_forms=get_forms(this.id),this.ability=this.valid_abilities[0][0],this.level=1,this.exp=0,this.held_item=0,this.happiness=0,this.form=this.valid_forms?0:null,this.language=2,this.origin=7,this.gender=is_genderless(a)?GENDERLESS:is_only_female(a)?FEMALE:MALE,this.egg=!1,this.shiny=!1,this.pokerus1=0,this.pokerus2=0,this.move1=null,this.move2=null,this.move3=null,this.move4=null;var b=this;this.$name=Field({label:"Pokémon Name",value:this.name,disabled:!0}),this.$nickname=Field({label:"Nickname"}).change(function(a){b.nickname=a}),this.$nature=Field({label:"Nature",type:"select",options:NATURE_OPTIONS,selected:1}).change(function(a){b.nature=a}),this.$ability=Field({label:"Ability",type:"select",options:this.valid_abilities,selected:this.ability}).change(function(a){b.ability=a}),this.$level=Field({label:"Level",type:"number",min:1,max:100,value:this.level}).change(function(c){console.log(c),b.level=c,console.log("derp "+c),b.exp=get_exp_for_level(a,c),console.log("exp needed: "+b.exp),b.$exp.val(b.exp),console.log("wtf")}),this.$exp=Field({label:"Experience",type:"number",min:0,max:get_max_exp(this.id),value:this.exp}).change(function(c){b.exp=c,b.level=get_level_from_exp(a,c),b.$level.val(b.level)}),this.$held=Field({label:"Held Item",type:"select",options:ITEMS,selected:this.held_item}).change(function(a){b.held_item=a}),this.$happiness=Field({label:"Happiness",type:"number",min:0,max:255,value:this.happiness}).change(function(a){b.happiness=a}),this.$form=Field({label:"Form",type:"select",disabled:!this.valid_forms,selected:null===this.form?0:this.form,options:this.valid_forms||[[0,"Not Available"]]}).change(function(a){b.form=a}),this.$lang=Field({label:"Language",type:"select",selected:this.language,options:LANGUAGE}).change(function(a){b.language=a}),this.$origin=Field({label:"Origin",type:"select",selected:this.origin,options:ORIGIN}).change(function(a){b.origin=a}),this.$gender=Field({label:"Gender",type:"select",selected:this.gender,options:is_genderless(a)?[[GENDERLESS,"Genderless"]]:[[MALE,"Male"],[FEMALE,"Female"]],disabled:is_genderless(a)}).change(function(a){b.gender=a}),this.$egg=Field({label:"Egg",type:"check",checked:this.egg}).change(function(a){b.egg=a}),this.$shiny=Field({label:"Shiny",type:"check",checked:this.shiny}).change(function(a){b.shiny=a}),this.$pokerus1=Field({label:"Pokérus Strain",type:"number",min:0,max:4,value:this.pokerus1}).change(function(a){b.pokerus1=a}),this.$pokerus2=Field({label:"Pokérus Duration",type:"number",min:0,max:4,value:this.pokerus2}).change(function(a){b.pokerus2=a}),$("#test").append(this.$name.render()),$("#test").append(this.$nickname.render()),$("#test").append(this.$nature.render()),$("#test").append(this.$ability.render()),$("#test").append($("<div>").addClass("input-grouped").append(this.$level.render()).append(this.$exp.render())),$("#test").append(this.$held.render()),$("#test").append(this.$happiness.render()),$("#test").append(this.$form.render()),$("#test").append(this.$lang.render()),$("#test").append(this.$origin.render()),$("#test").append(this.$gender.render()),$("#test").append($("<div>").addClass("input-grouped other-group").append(this.$egg.render()).append(this.$shiny.render()).append(this.$pokerus1.render()).append(this.$pokerus2.render()))}FieldTemplate.prototype.addValidator=function(a){return this._validators.push(a),this},FieldTemplate.prototype.isValid=function(){for(var a=0;a<this._validators.length;a++)if(!this._validators[a].call(this,this.value))return!1;return!0},FieldTemplate.prototype.change=function(a){var b=this;return $(this.field).change(function(){a.call(b,$(this).val())}),this},FieldTemplate.prototype.val=function(a){return void 0!==a?($(this.field).val(a),this):$(this.field).val()},FieldTemplate.prototype.render=function(){return $("<div>").addClass("input-group").append($("<label>").text(this.label))},TextField.prototype=new FieldTemplate,TextField.prototype.render=function(){var a=this;return this.field.attr({type:"text",disabled:this.disabled,placeholder:this.placeholder,value:this.value}).change(function(){a.value=$(this).val()}),FieldTemplate.prototype.render.call(this).append(this.field).wrap('<div class="input-wrapper"></div>').parent()},SelectField.prototype=new FieldTemplate,SelectField.prototype.render=function(){var a=this;return this.field.attr({disabled:this.disabled}).change(function(){a.value=$(this).val()}),this.options.forEach(function(b){a.field.append($("<option>").val(b[0]).text(b[1]))}),this.field.val(this.value),FieldTemplate.prototype.render.call(this).append(this.field).wrap('<div class="input-wrapper"></div>').parent()},NumberField.prototype=new FieldTemplate,NumberField.prototype.render=function(){var a=this;return this.field.attr({type:"number",min:this.min,max:this.max,placeholder:this.placeholder,value:this.value,disabled:this.disabled}).change(function(){a.value=$(this).val()}),FieldTemplate.prototype.render.call(this).append(this.field).wrap('<div class="input-wrapper"></div>').parent()},CheckField.prototype=new FieldTemplate,CheckField.prototype.render=function(){var a=this;return this.field.attr({type:"checkbox",checked:this.checked,disabled:this.disabled}).change(function(){a.checked=this.checked}),FieldTemplate.prototype.render.call(this).append($("<div>").addClass("check-group").append(this.field)).wrap('<div class="input-wrapper"></div>').parent()};var NATURE_OPTIONS=get_natures_as_options();NATURE_OPTIONS.sort(function(a,b){return a[1].localeCompare(b[1])}),Pokemon.prototype.render=function(){},$(function(){new Pokemon(149)});